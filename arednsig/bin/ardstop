#!/bin/bash
# Stop the radmon agent process.

if [ "$HOSTNAME" == "raspi3" ]; then
  AGENT_NAME="[a]rednsigMirrorAgent.py"
elif [ "$HOSTNAME" == "redwall" ]; then
  AGENT_NAME="[a]rednsigMirrorAgent.py"
elif [ "$HOSTNAME" == "ka7jlo-web" ]; then
  AGENT_NAME="[a]rednsigAgent.py"
else
  echo invalid host
  exit 1
fi

PROCESS_ID="$(ps x | awk -v a=$AGENT_NAME '$7 ~ a {print $1}')"

if [ -n "$PROCESS_ID" ]; then
  printf "killing arednsig agent [%s]\n" $PROCESS_ID
  kill $PROCESS_ID
else
  echo arednsig agent not running
fi
